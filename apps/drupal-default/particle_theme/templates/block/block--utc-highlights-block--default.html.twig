{% extends "block.html.twig" %}
{#
/**
 * @file Card Grid!
 * Implements a hero block in dark blue
 *
 *
 * Available variables:
 */
 *
 * This template pulls in the variables to add to the cards. 
 * References the block--utc-card-base.html.twig to create the individual cards in this grid.
#}

{% block content %}
	{% set rendered_content = content|render %}
	{# Sets variable to trigger content render array. #}
	{% set highlight_image_select = content["#block_content"].field_highlight_info_bg.0.target_id %}
	{% set utc_highlight = {
		highlight_bg: drupal_field('field_image_url', 'taxonomy_term', highlight_image_select)["#object"].field_image_url.value,
		bg_color: content["#block_content"].field_highlight_background_color.0.value,
		title: content.field_highlighted_info_title|field_value,
    } %}
	{% set info_1 = content.field_highlighted_info_1|field_value %}
	{% set info_2 = content.field_highlighted_info_2|field_value %}
	{% set card_iconinfo = info_1.0['#icons'][0]['#info'] %}

	{# Sets colors for hero content depending on selection #}
	{% if utc_highlight.bg_color == 'dark' %} 
		{% set info_color = 'text-utc-new-gold-500' %}
		{% set icon_color = 'text-white' %}
		{% set icon_color_2 = 'text-utc-new-blue-500' %}
		{% set info_color_2 = 'text-utc-new-blue-500' %}
		{% set description_color = 'text-white' %}
		{% set description_color_2 ='text-utc-new-blue-500' %}
		{% set bg_color = 'background-color:#112e51' %}
		{% set bg1_opacity = '' %}
    	{% set bg2_opacity = 'opacity-90' %}
		{% set bg_color_2 = 'bg-utc-new-blue-100' %}
	{% else %}
		{% set info_color = 'text-utc-new-blue-500' %}
		{% set icon_color = 'text-utc-new-blue-500' %}
		{% set icon_color_2 = 'text-utc-new-gold-500' %}
		{% set info_color_2 = 'text-utc-new-gold-500' %}
		{% set description_color = 'text-utc-new-blue-500' %}
		{% set description_color_2 ='text-white' %}
		{% set bg_color = 'background-color:#104dd4' %}
		{% set bg1_opacity = 'opacity-20' %}
    	{% set bg2_opacity = 'opacity-20' %}
		{% set bg_color_2 = 'bg-utc-new-blue-500' %}
	{% endif %}


	{% set description_classes = [
  		'p-10',
		'xl:w-1/2',
		'w-full',
		'text-xl',
		'text-center',
		description_color,
	] | sort | join(' ') | trim %}

	{% set info_classes = [
  		'block',
		'pb-2',
  		'text-4xl',
		'font-bold',
		info_color,
	] | sort | join(' ') | trim %}

	{% set description_classes_2 = [
  		'p-10',
		'w-full',
		'text-xl',
		description_color_2,
	] | sort | join(' ') | trim %}

	{% set info_classes_2 = [
  		'block',
		'pb-2',
  		'text-4xl',
		'font-bold',
		info_color_2,
	] | sort | join(' ') | trim %}

	<div class="grid grid-cols-1 lg:grid-cols-utchighlight lg:grid-rows-utchighlight lg:gap-y-4 lg:gap-x-10 grid-flow-row">
			<div class="col-start-1 row-start-1 m-10 mt-20 lg:m-0 lg:col-start-2 lg:col-end-3 lg:row-start-2 lg:row-end-4 lg:mb-10 z-10">
				
				{% if utc_highlight.title %}
					<h2 class="pl-6 {{ description_color }}">{{ utc_highlight.title }}</h2>
					<hr class="border-t-3 border-utc-new-gold-500 mt-3 mb-6 ml-8 w-20" />
				{% endif %}
					<ul class="flex flex-row flex-wrap list-none pl-0 mb-0">
					{% for content in info_1.0['#icons'] %}
						<li class="{{ description_classes }}">
							{% if info_1.0['#icons'][loop.index0]['#name'] %}
							<div class="mb-4 {{ icon_color }}"><span class="fas fa-3x {{ info_1.0['#icons'][loop.index0]['#name'] }}" ></span></div>
							{% endif %}
							<span class="{{ info_classes }}">{{ info_1.0['#icons'][loop.index0]['#info'] }}</span>
							{{ info_1.0['#icons'][loop.index0]['#description'] }}
						</li>
					{% endfor %}
					</ul>
			</div>
			<div class="w-full h-full {{ bg1_opacity }} bg-cover bg-center col-start-1 col-end-5 row-start-1 row-end-4" style="background-image: url({{ utc_highlight.highlight_bg }})">
				<div class="h-full w-full {{ bg2_opacity }}" style="{{ bg_color }}"></div>
			</div>
			<div class="w-full h-full  bg-cover bg-center col-start-1 row-start-3 lg:col-start-3 lg:col-end-4 lg:row-start-2 lg:row-end-5 z-20">
				<div class="h-full w-full {{ bg_color_2 }}">
					<ul class="flex flex-row flex-wrap justify-around list-none pt-10 m-6 pl-0">
					{% for content in info_2 if content['#icons'][0]['#info']is not empty %}
							<li class="{{ description_classes_2 }}">
							<div class="flex flex-row">
							{% if content['#icons'][0]['#name'] %}
								<div class="mb-4 mr-4 {{ icon_color_2 }}"><span class="fas fa-3x {{ content['#icons'][0]['#name'] }}" ></span></div>
							{% endif %}
							<div>
							<span class="{{ info_classes_2 }}">{{ content['#icons'][0]['#info'] }}</span>
							{{ content['#icons'][0]['#description'] }}
							</div>
							</div>
							</li>
					{% endfor %}
					</ul>
				</div>
			</div>
		</div>
{% endblock %}